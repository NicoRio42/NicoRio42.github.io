var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function s(){return Object.create(null)}function l(t){t.forEach(n)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,c;function a(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function u(t,e,n){t.$$.on_destroy.push(a(e,n))}function m(t,e,n,s){if(t){const l=p(t,e,n,s);return t[0](l)}}function p(t,n,s,l){return t[1]&&l?e(s.ctx.slice(),t[1](l(n))):s.ctx}function f(t,e,n,s){if(t[2]&&s){const l=t[2](s(n));if(void 0===e.dirty)return l;if("object"==typeof l){const t=[],n=Math.max(e.dirty.length,l.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|l[s];return t}return e.dirty|l}return e.dirty}function d(t,e,n,s,l,r){if(l){const o=p(e,n,s,r);t.p(o,l)}}function h(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function g(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function $(t,e){const n={};e=new Set(e);for(const s in t)e.has(s)||"$"===s[0]||(n[s]=t[s]);return n}function v(t){return null==t?"":t}function C(t,e){t.appendChild(e)}function b(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function L(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function k(){return x(" ")}function S(){return x("")}function T(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function N(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function M(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)null==e[s]?t.removeAttribute(s):"style"===s?t.style.cssText=e[s]:"__value"===s?t.value=t[s]=e[s]:n[s]&&n[s].set?t[s]=e[s]:N(t,s,e[s])}function O(t){return""===t?null:+t}function E(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function A(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function R(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function B(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function q(t,e,n){t.classList[n?"add":"remove"](e)}function H(t){c=t}function j(){if(!c)throw new Error("Function called outside component initialization");return c}function D(){const t=j();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const l=function(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}(e,n);s.slice().forEach((e=>{e.call(t,l)}))}}}function I(t,e){j().$$.context.set(t,e)}function z(t){return j().$$.context.get(t)}const P=[],F=[],V=[],W=[],G=Promise.resolve();let K=!1;function X(t){V.push(t)}function Z(t){W.push(t)}const U=new Set;let J=0;function Q(){const t=c;do{for(;J<P.length;){const t=P[J];J++,H(t),Y(t.$$)}for(H(null),P.length=0,J=0;F.length;)F.pop()();for(let t=0;t<V.length;t+=1){const e=V[t];U.has(e)||(U.add(e),e())}V.length=0}while(P.length);for(;W.length;)W.pop()();K=!1,U.clear(),H(t)}function Y(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(X)}}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function st(){et.r||l(et.c),et=et.p}function lt(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function rt(t,e,n,s){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push((()=>{tt.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function ot(t,e){const n={},s={},l={$$scope:1};let r=t.length;for(;r--;){const o=t[r],i=e[r];if(i){for(const t in o)t in i||(s[t]=1);for(const t in i)l[t]||(n[t]=i[t],l[t]=1);t[r]=i}else for(const t in o)l[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}function it(t){return"object"==typeof t&&null!==t?t:{}}function ct(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function at(t){t&&t.c()}function ut(t,e,s,o){const{fragment:i,on_mount:c,on_destroy:a,after_update:u}=t.$$;i&&i.m(e,s),o||X((()=>{const e=c.map(n).filter(r);a?a.push(...e):l(e),t.$$.on_mount=[]})),u.forEach(X)}function mt(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(t,e){-1===t.$$.dirty[0]&&(P.push(t),K||(K=!0,G.then(Q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ft(e,n,r,o,i,a,u,m=[-1]){const p=c;H(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:i,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:s(),dirty:m,skip_bound:!1,root:n.target||p.$$.root};u&&u(f.root);let d=!1;if(f.ctx=r?r(e,n.props||{},((t,n,...s)=>{const l=s.length?s[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=l)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](l),d&&pt(e,t)),n})):[],f.update(),d=!0,l(f.before_update),f.fragment=!!o&&o(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(y)}else f.fragment&&f.fragment.c();n.intro&&lt(e.$$.fragment),ut(e,n.target,n.anchor,n.customElement),Q()}H(p)}class dt{$destroy(){mt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ht=[];function gt(e,n=t){let s;const l=new Set;function r(t){if(o(e,t)&&(e=t,s)){const t=!ht.length;for(const t of l)t[1](),ht.push(t,e);if(t){for(let t=0;t<ht.length;t+=2)ht[t][0](ht[t+1]);ht.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(o,i=t){const c=[o,i];return l.add(c),1===l.size&&(s=n(r)||t),o(e),()=>{l.delete(c),0===l.size&&(s(),s=null)}}}}function $t(e,n,s){const o=!Array.isArray(e),i=o?[e]:e,c=n.length<2;return u=e=>{let s=!1;const u=[];let m=0,p=t;const f=()=>{if(m)return;p();const s=n(o?u[0]:u,e);c?e(s):p=r(s)?s:t},d=i.map(((t,e)=>a(t,(t=>{u[e]=t,m&=~(1<<e),s&&f()}),(()=>{m|=1<<e}))));return s=!0,f(),function(){l(d),p()}},{subscribe:gt(s,u).subscribe};var u}const vt={},Ct={};function bt(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}const yt=function(t,e){const n=[];let s=bt(t);return{get location(){return s},listen(e){n.push(e);const l=()=>{s=bt(t),e({location:s,action:"POP"})};return t.addEventListener("popstate",l),()=>{t.removeEventListener("popstate",l);const s=n.indexOf(e);n.splice(s,1)}},navigate(e,{state:l,replace:r=!1}={}){l={...l,key:Date.now()+""};try{r?t.history.replaceState(l,null,e):t.history.pushState(l,null,e)}catch(n){t.location[r?"replace":"assign"](e)}s=bt(t),n.forEach((t=>t({location:s,action:"PUSH"})))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(t="/"){let e=0;const n=[{pathname:t,search:""}],s=[];return{get location(){return n[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return n},get index(){return e},get state(){return s[e]},pushState(t,l,r){const[o,i=""]=r.split("?");e++,n.push({pathname:o,search:i}),s.push(t)},replaceState(t,l,r){const[o,i=""]=r.split("?");n[e]={pathname:o,search:i},s[e]=t}}}}()),{navigate:Lt}=yt,wt=/^:(.+)/;function xt(t,e){return t.substr(0,e.length)===e}function kt(t){return"*"===t[0]}function St(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Tt(t){return t.replace(/(^\/+|\/+$)/g,"")}function Nt(t,e){return{route:t,score:t.default?0:St(t.path).reduce(((t,e)=>(t+=4,!function(t){return""===t}(e)?!function(t){return wt.test(t)}(e)?kt(e)?t-=5:t+=3:t+=2:t+=1,t)),0),index:e}}function Mt(t,e){let n,s;const[l]=e.split("?"),r=St(l),o=""===r[0],i=function(t){return t.map(Nt).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index))}(t);for(let t=0,l=i.length;t<l;t++){const l=i[t].route;let c=!1;if(l.default){s={route:l,params:{},uri:e};continue}const a=St(l.path),u={},m=Math.max(r.length,a.length);let p=0;for(;p<m;p++){const t=a[p],e=r[p];if(void 0!==t&&kt(t)){u["*"===t?"*":t.slice(1)]=r.slice(p).map(decodeURIComponent).join("/");break}if(void 0===e){c=!0;break}let n=wt.exec(t);if(n&&!o){const t=decodeURIComponent(e);u[n[1]]=t}else if(t!==e){c=!0;break}}if(!c){n={route:l,params:u,uri:"/"+r.slice(0,p).join("/")};break}}return n||s||null}function Ot(t,e){return t+(e?`?${e}`:"")}function Et(t,e){return`${Tt("/"===e?t:`${Tt(t)}/${Tt(e)}`)}/`}function _t(t){let e;const n=t[9].default,s=m(n,t,t[8],null);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,[l]){s&&s.p&&(!e||256&l)&&d(s,n,t,t[8],e?f(n,t[8],l,null):h(t[8]),null)},i(t){e||(lt(s,t),e=!0)},o(t){rt(s,t),e=!1},d(t){s&&s.d(t)}}}function At(t,e,n){let s,l,r,{$$slots:o={},$$scope:i}=e,{basepath:c="/"}=e,{url:a=null}=e;const m=z(vt),p=z(Ct),f=gt([]);u(t,f,(t=>n(6,l=t)));const d=gt(null);let h=!1;const g=m||gt(a?{pathname:a}:yt.location);u(t,g,(t=>n(5,s=t)));const $=p?p.routerBase:gt({path:c,uri:c});u(t,$,(t=>n(7,r=t)));const v=$t([$,d],(([t,e])=>{if(null===e)return t;const{path:n}=t,{route:s,uri:l}=e;return{path:s.default?n:s.path.replace(/\*.*$/,""),uri:l}}));var C;return m||(C=()=>yt.listen((t=>{g.set(t.location)})),j().$$.on_mount.push(C),I(vt,g)),I(Ct,{activeRoute:d,base:$,routerBase:v,registerRoute:function(t){const{path:e}=r;let{path:n}=t;if(t._path=n,t.path=Et(e,n),"undefined"==typeof window){if(h)return;const e=function(t,e){return Mt([t],e)}(t,s.pathname);e&&(d.set(e),h=!0)}else f.update((e=>(e.push(t),e)))},unregisterRoute:function(t){f.update((e=>{const n=e.indexOf(t);return e.splice(n,1),e}))}}),t.$$set=t=>{"basepath"in t&&n(3,c=t.basepath),"url"in t&&n(4,a=t.url),"$$scope"in t&&n(8,i=t.$$scope)},t.$$.update=()=>{if(128&t.$$.dirty){const{path:t}=r;f.update((e=>(e.forEach((e=>e.path=Et(t,e._path))),e)))}if(96&t.$$.dirty){const t=Mt(l,s.pathname);d.set(t)}},[f,g,$,c,a,s,l,r,i,o]}class Rt extends dt{constructor(t){super(),ft(this,t,At,_t,o,{basepath:3,url:4})}}const Bt=t=>({params:4&t,location:16&t}),qt=t=>({params:t[2],location:t[4]});function Ht(t){let e,n,s,l;const r=[Dt,jt],o=[];function i(t,e){return null!==t[0]?0:1}return e=i(t),n=o[e]=r[e](t),{c(){n.c(),s=S()},m(t,n){o[e].m(t,n),b(t,s,n),l=!0},p(t,l){let c=e;e=i(t),e===c?o[e].p(t,l):(nt(),rt(o[c],1,1,(()=>{o[c]=null})),st(),n=o[e],n?n.p(t,l):(n=o[e]=r[e](t),n.c()),lt(n,1),n.m(s.parentNode,s))},i(t){l||(lt(n),l=!0)},o(t){rt(n),l=!1},d(t){o[e].d(t),t&&y(s)}}}function jt(t){let e;const n=t[10].default,s=m(n,t,t[9],qt);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,l){s&&s.p&&(!e||532&l)&&d(s,n,t,t[9],e?f(n,t[9],l,Bt):h(t[9]),qt)},i(t){e||(lt(s,t),e=!0)},o(t){rt(s,t),e=!1},d(t){s&&s.d(t)}}}function Dt(t){let n,s,l;const r=[{location:t[4]},t[2],t[3]];var o=t[0];function i(t){let n={};for(let t=0;t<r.length;t+=1)n=e(n,r[t]);return{props:n}}return o&&(n=new o(i())),{c(){n&&at(n.$$.fragment),s=S()},m(t,e){n&&ut(n,t,e),b(t,s,e),l=!0},p(t,e){const l=28&e?ot(r,[16&e&&{location:t[4]},4&e&&it(t[2]),8&e&&it(t[3])]):{};if(o!==(o=t[0])){if(n){nt();const t=n;rt(t.$$.fragment,1,0,(()=>{mt(t,1)})),st()}o?(n=new o(i()),at(n.$$.fragment),lt(n.$$.fragment,1),ut(n,s.parentNode,s)):n=null}else o&&n.$set(l)},i(t){l||(n&&lt(n.$$.fragment,t),l=!0)},o(t){n&&rt(n.$$.fragment,t),l=!1},d(t){t&&y(s),n&&mt(n,t)}}}function It(t){let e,n,s=null!==t[1]&&t[1].route===t[7]&&Ht(t);return{c(){s&&s.c(),e=S()},m(t,l){s&&s.m(t,l),b(t,e,l),n=!0},p(t,[n]){null!==t[1]&&t[1].route===t[7]?s?(s.p(t,n),2&n&&lt(s,1)):(s=Ht(t),s.c(),lt(s,1),s.m(e.parentNode,e)):s&&(nt(),rt(s,1,1,(()=>{s=null})),st())},i(t){n||(lt(s),n=!0)},o(t){rt(s),n=!1},d(t){s&&s.d(t),t&&y(e)}}}function zt(t,n,s){let l,r,{$$slots:o={},$$scope:i}=n,{path:c=""}=n,{component:a=null}=n;const{registerRoute:m,unregisterRoute:p,activeRoute:f}=z(Ct);u(t,f,(t=>s(1,l=t)));const d=z(vt);u(t,d,(t=>s(4,r=t)));const h={path:c,default:""===c};let $={},v={};var C;return m(h),"undefined"!=typeof window&&(C=()=>{p(h)},j().$$.on_destroy.push(C)),t.$$set=t=>{s(13,n=e(e({},n),g(t))),"path"in t&&s(8,c=t.path),"component"in t&&s(0,a=t.component),"$$scope"in t&&s(9,i=t.$$scope)},t.$$.update=()=>{2&t.$$.dirty&&l&&l.route===h&&s(2,$=l.params);{const{path:t,component:e,...l}=n;s(3,v=l)}},n=g(n),[a,l,$,v,r,f,d,h,c,i,o]}class Pt extends dt{constructor(t){super(),ft(this,t,zt,It,o,{path:8,component:0})}}function Ft(t){let n,s,l,r;const o=t[16].default,i=m(o,t,t[15],null);let c=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],a={};for(let t=0;t<c.length;t+=1)a=e(a,c[t]);return{c(){n=w("a"),i&&i.c(),M(n,a)},m(e,o){b(e,n,o),i&&i.m(n,null),s=!0,l||(r=T(n,"click",t[5]),l=!0)},p(t,[e]){i&&i.p&&(!s||32768&e)&&d(i,o,t,t[15],s?f(o,t[15],e,null):h(t[15]),null),M(n,a=ot(c,[(!s||1&e)&&{href:t[0]},(!s||4&e)&&{"aria-current":t[2]},2&e&&t[1],64&e&&t[6]]))},i(t){s||(lt(i,t),s=!0)},o(t){rt(i,t),s=!1},d(t){t&&y(n),i&&i.d(t),l=!1,r()}}}function Vt(t,n,s){let l;const r=["to","replace","state","getProps"];let o,i,c=$(n,r),{$$slots:a={},$$scope:m}=n,{to:p="#"}=n,{replace:f=!1}=n,{state:d={}}=n,{getProps:h=(()=>({}))}=n;const{base:v}=z(Ct);u(t,v,(t=>s(14,i=t)));const C=z(vt);u(t,C,(t=>s(13,o=t)));const b=D();let y,L,w,x;return t.$$set=t=>{n=e(e({},n),g(t)),s(6,c=$(n,r)),"to"in t&&s(7,p=t.to),"replace"in t&&s(8,f=t.replace),"state"in t&&s(9,d=t.state),"getProps"in t&&s(10,h=t.getProps),"$$scope"in t&&s(15,m=t.$$scope)},t.$$.update=()=>{16512&t.$$.dirty&&s(0,y="/"===p?i.uri:function(t,e){if(xt(t,"/"))return t;const[n,s]=t.split("?"),[l]=e.split("?"),r=St(n),o=St(l);if(""===r[0])return Ot(l,s);if(!xt(r[0],"."))return Ot(("/"===l?"":"/")+o.concat(r).join("/"),s);const i=o.concat(r),c=[];return i.forEach((t=>{".."===t?c.pop():"."!==t&&c.push(t)})),Ot("/"+c.join("/"),s)}(p,i.uri)),8193&t.$$.dirty&&s(11,L=xt(o.pathname,y)),8193&t.$$.dirty&&s(12,w=y===o.pathname),4096&t.$$.dirty&&s(2,l=w?"page":void 0),15361&t.$$.dirty&&s(1,x=h({location:o,href:y,isPartiallyCurrent:L,isCurrent:w}))},[y,x,l,v,C,function(t){if(b("click",t),function(t){return!t.defaultPrevented&&0===t.button&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)){t.preventDefault();const e=o.pathname===y||f;Lt(y,{state:d,replace:e})}},c,p,f,d,h,L,w,o,i,m,a]}class Wt extends dt{constructor(t){super(),ft(this,t,Vt,Ft,o,{to:7,replace:8,state:9,getProps:10})}}function Gt(e){let n;return{c(){n=w("h1"),n.textContent="Home"},m(t,e){b(t,n,e)},p:t,i:t,o:t,d(t){t&&y(n)}}}class Kt extends dt{constructor(t){super(),ft(this,t,null,Gt,o,{})}}function Xt(e){let n;return{c(){n=w("h1"),n.textContent="About"},m(t,e){b(t,n,e)},p:t,i:t,o:t,d(t){t&&y(n)}}}class Zt extends dt{constructor(t){super(),ft(this,t,null,Xt,o,{})}}function Ut(e){let n,s,r,o,i,c,a,u,m,p,f,d,h,g,$,v;return{c(){n=w("main"),s=w("article"),r=w("h1"),r.textContent="Login",o=k(),i=w("form"),c=w("label"),c.textContent="Email",a=k(),u=w("input"),m=k(),p=w("label"),p.textContent="Password",f=k(),d=w("input"),h=k(),g=w("button"),g.textContent="Login",N(r,"class","svelte-1kpt7hq"),N(c,"for","email"),N(u,"id","email"),N(u,"type","email"),N(u,"name","email"),u.required=!0,N(p,"for","password"),N(d,"type","password"),N(d,"id","password"),N(d,"name","password"),d.required=!0,N(g,"type","submit"),N(s,"class","login-box svelte-1kpt7hq"),N(n,"class","svelte-1kpt7hq")},m(t,l){b(t,n,l),C(n,s),C(s,r),C(s,o),C(s,i),C(i,c),C(i,a),C(i,u),_(u,e[0]),C(i,m),C(i,p),C(i,f),C(i,d),_(d,e[1]),C(i,h),C(i,g),$||(v=[T(u,"input",e[3]),T(d,"input",e[4]),T(g,"click",e[2]),T(i,"submit",e[2])],$=!0)},p(t,[e]){1&e&&u.value!==t[0]&&_(u,t[0]),2&e&&d.value!==t[1]&&_(d,t[1])},i:t,o:t,d(t){t&&y(n),$=!1,l(v)}}}function Jt(t,e,n){let s,l;return[s,l,t=>{console.log("toto")},function(){s=this.value,n(0,s)},function(){l=this.value,n(1,l)}]}class Qt extends dt{constructor(t){super(),ft(this,t,Jt,Ut,o,{})}}function Yt(t){const e=e=>{!t||t.contains(e.target)||e.defaultPrevented||t.dispatchEvent(new CustomEvent("clickOutside",t))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}const te=t=>({}),ee=t=>({class:"slot"}),ne=t=>({}),se=t=>({});function le(e){let n,s,o,i,c,a,u,p;const g=e[2].title,$=m(g,e,e[1],se),v=e[2].content,L=m(v,e,e[1],ee);return{c(){n=w("dialog"),s=w("article"),o=w("a"),i=k(),$&&$.c(),c=k(),L&&L.c(),N(o,"href","#close"),N(o,"aria-label","Close"),N(o,"class","close"),N(o,"data-target","modal"),N(s,"class","modal-content svelte-b6dbhk"),n.open=!0,N(n,"class","modal")},m(l,m){var f;b(l,n,m),C(n,s),C(s,o),C(s,i),$&&$.m(s,null),C(s,c),L&&L.m(s,null),a=!0,u||(p=[T(o,"click",e[0]),(f=Yt.call(null,s),f&&r(f.destroy)?f.destroy:t),T(s,"clickOutside",e[0])],u=!0)},p(t,[e]){$&&$.p&&(!a||2&e)&&d($,g,t,t[1],a?f(g,t[1],e,ne):h(t[1]),se),L&&L.p&&(!a||2&e)&&d(L,v,t,t[1],a?f(v,t[1],e,te):h(t[1]),ee)},i(t){a||(lt($,t),lt(L,t),a=!0)},o(t){rt($,t),rt(L,t),a=!1},d(t){t&&y(n),$&&$.d(t),L&&L.d(t),u=!1,l(p)}}}function re(t,e,n){let{$$slots:s={},$$scope:l}=e;const r=D();return t.$$set=t=>{"$$scope"in t&&n(1,l=t.$$scope)},[()=>{r("closeDialog")},l,s]}class oe extends dt{constructor(t){super(),ft(this,t,re,le,o,{})}}function ie(t,e,n){const s=t.slice();return s[7]=e[n],s}function ce(t){let e,n,s,l=t[7]+1+"";return{c(){e=w("option"),n=x(l),e.__value=s=t[7]+1,e.value=e.__value},m(t,s){b(t,e,s),C(e,n)},p(t,r){2&r&&l!==(l=t[7]+1+"")&&E(n,l),2&r&&s!==(s=t[7]+1)&&(e.__value=s,e.value=e.__value)},d(t){t&&y(e)}}}function ae(e){let n,s,r,o,i,c,a,u,m=[...Array(e[1]).keys()],p=[];for(let t=0;t<m.length;t+=1)p[t]=ce(ie(e,m,t));return{c(){n=w("div"),s=w("button"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svelte-18fpq70"><path d="M224 480c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25l192-192c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L77.25 256l169.4 169.4c12.5 12.5 12.5 32.75 0 45.25C240.4 476.9 232.2 480 224 480z"></path></svg>',r=k(),o=w("select");for(let t=0;t<p.length;t+=1)p[t].c();i=k(),c=w("button"),c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svelte-18fpq70"><path d="M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"></path></svg>',N(s,"class","svelte-18fpq70"),N(o,"class","svelte-18fpq70"),void 0===e[0]&&X((()=>e[5].call(o))),N(c,"class","svelte-18fpq70"),N(n,"class","control-bar svelte-18fpq70")},m(t,l){b(t,n,l),C(n,s),C(n,r),C(n,o);for(let t=0;t<p.length;t+=1)p[t].m(o,null);R(o,e[0]),C(n,i),C(n,c),a||(u=[T(s,"click",e[3]),T(o,"change",e[5]),T(o,"change",e[2]),T(c,"click",e[4])],a=!0)},p(t,[e]){if(2&e){let n;for(m=[...Array(t[1]).keys()],n=0;n<m.length;n+=1){const s=ie(t,m,n);p[n]?p[n].p(s,e):(p[n]=ce(s),p[n].c(),p[n].m(o,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=m.length}3&e&&R(o,t[0])},i:t,o:t,d(t){t&&y(n),L(p,t),a=!1,l(u)}}}function ue(t,e,n){let{selectedLeg:s}=e,{numberOfLegs:l}=e;const r=D();function o(){r("legChange")}return t.$$set=t=>{"selectedLeg"in t&&n(0,s=t.selectedLeg),"numberOfLegs"in t&&n(1,l=t.numberOfLegs)},[s,l,o,()=>{n(0,s=1!==s?s-1:s),o()},()=>{n(0,s=s!==l?s+1:s),o()},function(){s=B(this),n(0,s),n(1,l)}]}class me extends dt{constructor(t){super(),ft(this,t,ue,ae,o,{selectedLeg:0,numberOfLegs:1})}}class pe{constructor(t,e,n=1.2,s,l,r){this.course=[],this.runners=[],this.leader=[],this.superman=[],this.supermanSplits=[],this.mistakesSum=[],this.timeOffset=0,this.routeChoicesStatistics=[],this.splitsXmlDoc=t,this.className=e,this.mistakeDetectionRatio=n,this.date=r,this.timeZone=s,this.timeOffset=l,this.loadSplits()}computeRoutechoicesStatistics(){this.course.forEach(((t,e)=>{const n={},s=this.runners.map((t=>{const n=t.legs[e];return{id:t.id,time:n.time,routeChoice:n.routeChoice}})).filter((t=>t.routeChoice));s.sort(((t,e)=>this.sortRunners(t,e))),0!==s.length&&(Math.round(s.length/4),s.forEach(((t,e)=>{var s,l;n[t.routeChoice.name]=null!==(s=n[t.routeChoice.name])&&void 0!==s?s:{numberOfRunners:0},n[t.routeChoice.name].fastestTime=null!==(l=n[t.routeChoice.name].fastestTime)&&void 0!==l?l:t.time,n[t.routeChoice.name].numberOfRunners+=1,n[t.routeChoice.name].color=t.routeChoice.color}))),this.routeChoicesStatistics.push(n)})),console.log(this.routeChoicesStatistics)}loadSplits(){this.loadSplitsFromXml(),this.checkIfCourseIsComplete(),this.calculateRanks(),this.calculateSplitTimes(),this.calculateSplitRanksAndTimeBehind(),this.calculateOverallRanks(),this.calculateMistakes()}loadSplitsFromXml(){const t=Array.from(this.splitsXmlDoc.querySelectorAll("ClassResult")),e=this.splitsXmlDoc.querySelector("ResultList").getAttribute("iofVersion");t.filter((t=>("3.0"===e?t.querySelector("Class Name").innerHTML:t.querySelector("ClassShortName").innerHTML)===this.className))[0].querySelectorAll("PersonResult").forEach(((t,n)=>{const s=n+1,l=t.querySelector("Family")?t.querySelector("Family").innerHTML:"",r=t.querySelector("Given").innerHTML;let o=null,i=null,c=null;t.querySelector("StartTime")&&("3.0"===e?(i=t.querySelector("StartTime").innerHTML.includes("+")?t.querySelector("StartTime").innerHTML:t.querySelector("StartTime").innerHTML+this.timeZone,c=t.querySelector("Status").innerHTML,c&&(o=Number(t.querySelector("Time").innerHTML))):(i=this.date+"T"+t.querySelector("StartTime").innerHTML+this.timeZone,c=t.querySelector("CompetitorStatus").getAttribute("value"),c&&(o=this.timeToSeconds(t.querySelector("Time").innerHTML))));const a=Array.from(t.querySelectorAll("ControlCode")).map((t=>Number(t.innerHTML))),u=Array.from(t.querySelectorAll("SplitTime")).map((t=>{const n=Number(t.querySelector("ControlCode").innerHTML),s=t.querySelector("Time");let l;return l=s?"3.0"===e?Number(s.innerHTML):this.timeToSeconds(s.innerHTML):null,{controlCode:n,timeOverall:l}}));u.push({controlCode:999,timeOverall:o}),a.push(999),this.runners.push({id:s,course:a,status:c,firstName:r,lastName:l,startTime:i,time:o,legs:u,timeBehindSupermanGraphData:[],timeBehindLeaderGraphData:[]})})),this.course=this.runners[0].course}checkIfCourseIsComplete(){this.runners.forEach((t=>{this.arrayEquals(t.course,this.course)?t.isComplete=!0:t.isComplete=!1})),this.runners=this.runners.filter((t=>!0===t.isComplete))}calculateRanks(){this.runners.sort(((t,e)=>this.sortRunners(t,e)));const t=this.runners.length,e=this.runners[0].time;for(let n=0;n<t;n++)n>0&&null!==this.runners[n].time?(this.runners[n].time===this.runners[n-1].time?this.runners[n].rank=this.runners[n-1].rank:this.runners[n].rank=n+1,this.runners[n].timeBehind=this.runners[n].time-e):null!==this.runners[n].time&&(this.runners[n].rank=n+1,this.runners[n].timeBehind=this.runners[n].time-e)}calculateSplitTimes(){this.runners.forEach((t=>{t.legs.forEach(((e,n)=>{0===n?null===e.timeOverall?e.time=null:e.time=e.timeOverall:null===e.timeOverall||null===t.legs[n-1].timeOverall?e.time=null:e.time=e.timeOverall-t.legs[n-1].timeOverall}))}))}calculateSplitRanksAndTimeBehind(){this.course.forEach(((t,e)=>{const n=this.runners.map((e=>{const n=e.legs.find((e=>e.controlCode===t));return{id:e.id,time:n.time}}));n.sort(((t,e)=>this.sortRunners(t,e))),0===e?this.superman.push(n[0].time):this.superman.push(this.superman[e-1]+n[0].time),this.supermanSplits.push(n[0].time),n.forEach(((t,s)=>{s>0&&t.time===n[s-1].time?t.rankSplit=n[s-1].rankSplit:t.rankSplit=s+1;const l=this.runners.findIndex((e=>t.id===e.id));this.runners[l].legs[e].rankSplit=t.rankSplit,null===this.runners[l].legs[e].time?this.runners[l].legs[e].timeBehindSplit=null:this.runners[l].legs[e].timeBehindSplit=this.runners[l].legs[e].time-n[0].time}))}))}calculateOverallRanks(){this.course.forEach(((t,e)=>{const n=this.runners.map((e=>{const n=e.legs.find((e=>e.controlCode===t));return{id:e.id,time:n.timeOverall}}));n.sort(((t,e)=>this.sortRunners(t,e))),this.leader.push(n[0].time),n.forEach(((t,s)=>{s>0&&t.time===n[s-1].time?t.rankSplit=n[s-1].rankSplit:t.rankSplit=s+1;const l=this.runners.findIndex((e=>t.id===e.id));this.runners[l].legs[e].rankOverall=t.rankSplit,null===this.runners[l].legs[e].timeOverall?(this.runners[l].legs[e].timeBehindOverall=null,this.runners[l].legs[e].timeBehindSuperman=null):(this.runners[l].legs[e].timeBehindOverall=this.runners[l].legs[e].timeOverall-n[0].time,this.runners[l].legs[e].timeBehindSuperman=this.runners[l].legs[e].timeOverall-this.superman[e])}))}))}calculateMistakes(){this.mistakesSum=new Array(this.course.length).fill(0),this.runners.forEach((t=>{if("OK"===t.status){const e=t.legs.map(((t,e)=>t.time/this.supermanSplits[e])),n=this.arrayAverage(e);let s=[];e.forEach(((e,l)=>{e>n*this.mistakeDetectionRatio?t.legs[l].isMistake=!0:(t.legs[l].isMistake=!1,s.push(e)),t.timeBehindSupermanGraphData.push({x:this.superman[l],y:t.legs[l].timeBehindSuperman}),t.timeBehindLeaderGraphData.push({x:this.leader[l],y:t.legs[l].timeBehindOverall})}));let l=this.arrayAverage(s);s=[],e.forEach(((e,n)=>{e>l*this.mistakeDetectionRatio?(t.legs[n].isMistake=!0,this.mistakesSum[n]++):(t.legs[n].isMistake=!1,s.push(e))})),l=this.arrayAverage(s);let r=0;t.legs.forEach(((t,e)=>{t.isMistake&&(t.timeWithoutMistake=Math.round(this.supermanSplits[e]*l),t.timeLost=t.time-t.timeWithoutMistake,r+=t.timeLost)})),t.totalTimeLost=r}}))}sortRunners(t,e){return null!==t.time&&null!==e.time?t.time-e.time:null===t.time&&null!==e.time?1:null!==t.time&&null===e.time?-1:0}arrayEquals(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>t===e[n]))}arrayAverage(t){const e=t.length;let n=0;for(let s=0;s<e;s++)n+=Number(t[s]);return n/e}timeToSeconds(t){const e=t.split(":"),n=e.length;let s=Number(e[n-1]);return n>1&&(s+=60*Number(e[n-2])),n>2&&(s+=3600*Number(e[n-3])),s}}const fe=["+00:00","+01:00","+02:00","+03:00","+04:00","+05:00","+06:00","+07:00","+08:00","+09:00","+10:00","+12:00","+13:00","+14:00","+15:00","+16:00","+17:00","+18:00","+19:00","+20:00","+21:00","+22:00","+23:00"];function de(t,e,n){const s=t.slice();return s[21]=e[n],s[22]=e,s[23]=n,s}function he(t,e,n){const s=t.slice();return s[24]=e[n],s[26]=n,s}function ge(t,e,n){const s=t.slice();return s[6]=e[n],s}function $e(t,e,n){const s=t.slice();return s[5]=e[n],s}function ve(t){let e,n,s,l=t[5]+"";return{c(){e=w("option"),n=x(l),e.__value=s=t[5],e.value=e.__value},m(t,s){b(t,e,s),C(e,n)},p(t,r){2&r&&l!==(l=t[5]+"")&&E(n,l),2&r&&s!==(s=t[5])&&(e.__value=s,e.value=e.__value)},d(t){t&&y(e)}}}function Ce(e){let n,s,l,r=e[6]+"";return{c(){n=w("option"),s=x(r),n.__value=l=e[6],n.value=n.__value},m(t,e){b(t,n,e),C(n,s)},p:t,d(t){t&&y(n)}}}function be(t){let e,n,s,l=t[24].runnername+"";return{c(){e=w("option"),n=x(l),e.__value=s=t[26],e.value=e.__value},m(t,s){b(t,e,s),C(e,n)},p(t,e){1&e&&l!==(l=t[24].runnername+"")&&E(n,l)},d(t){t&&y(e)}}}function ye(t){let e,n,s,l,r,o,i,c,a,u=`${t[21].firstName} ${t[21].lastName}`,m=t[0].routes,p=[];for(let e=0;e<m.length;e+=1)p[e]=be(he(t,m,e));function f(){t[17].call(o,t[22],t[23])}return{c(){e=w("tr"),n=w("td"),s=x(u),l=k(),r=w("td"),o=w("select");for(let t=0;t<p.length;t+=1)p[t].c();i=k(),void 0===t[21].rerun2dRouteIndex&&X(f)},m(u,m){b(u,e,m),C(e,n),C(n,s),C(e,l),C(e,r),C(r,o);for(let t=0;t<p.length;t+=1)p[t].m(o,null);R(o,t[21].rerun2dRouteIndex),C(e,i),c||(a=T(o,"change",f),c=!0)},p(e,n){if(t=e,8&n&&u!==(u=`${t[21].firstName} ${t[21].lastName}`)&&E(s,u),1&n){let e;for(m=t[0].routes,e=0;e<m.length;e+=1){const s=he(t,m,e);p[e]?p[e].p(s,n):(p[e]=be(s),p[e].c(),p[e].m(o,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=m.length}8&n&&R(o,t[21].rerun2dRouteIndex)},d(t){t&&y(e),L(p,t),c=!1,a()}}}function Le(e){let n,s,r,o,i,c,a,u,m,p,f,d,h,g,$,v,S,M,E,A,B,H,j,D,I,z,P,F,V,W,G,K,Z,U,J,Q=e[1],Y=[];for(let t=0;t<Q.length;t+=1)Y[t]=ve($e(e,Q,t));let tt=fe,et=[];for(let t=0;t<tt.length;t+=1)et[t]=Ce(ge(e,tt,t));let nt=e[3],st=[];for(let t=0;t<nt.length;t+=1)st[t]=ye(de(e,nt,t));return{c(){n=w("form"),s=w("label"),s.textContent="Load IOF XML File",r=k(),o=w("input"),i=k(),c=w("label"),c.textContent="Class",a=k(),u=w("select");for(let t=0;t<Y.length;t+=1)Y[t].c();m=k(),p=w("label"),p.textContent="Time zone",f=k(),d=w("select"),h=x("timeZone\r\n    ");for(let t=0;t<et.length;t+=1)et[t].c();g=k(),$=w("label"),$.textContent="Time offset (seconds)",v=k(),S=w("input"),M=k(),E=w("footer"),A=w("button"),A.textContent="Cancel",B=k(),H=w("button"),H.textContent="Load splits",j=k(),D=w("form"),I=w("table"),z=w("thead"),z.innerHTML="<tr><th>Split times</th> \n        <th>GPS track</th></tr>",P=k(),F=w("tbody");for(let t=0;t<st.length;t+=1)st[t].c();V=k(),W=w("footer"),G=w("button"),G.textContent="Cancel",K=k(),Z=w("button"),Z.textContent="Save split times",N(s,"for","iof-xml-file"),N(o,"name","iof-xml-file"),N(o,"id","iof-xml-file"),N(o,"type","file"),N(c,"for","class"),N(u,"name","class"),N(u,"id","class"),void 0===e[5]&&X((()=>e[13].call(u))),N(p,"for","time-zone"),N(d,"name","time-zone"),N(d,"id","time-zone"),void 0===e[6]&&X((()=>e[14].call(d))),N($,"for","time-offset"),N(S,"type","number"),N(S,"name","time-offset"),N(S,"id","time-offset"),N(A,"type","button"),N(A,"class","outline svelte-4g5xig"),N(H,"type","submit"),N(H,"class","svelte-4g5xig"),N(E,"class","footer svelte-4g5xig"),N(n,"class","step svelte-4g5xig"),q(n,"slide-right",2===e[4]),N(G,"type","button"),N(G,"class","outline svelte-4g5xig"),N(Z,"type","submit"),N(Z,"class","svelte-4g5xig"),N(W,"class","footer svelte-4g5xig"),N(D,"class","step svelte-4g5xig"),q(D,"slide-left",1===e[4])},m(t,l){b(t,n,l),C(n,s),C(n,r),C(n,o),C(n,i),C(n,c),C(n,a),C(n,u);for(let t=0;t<Y.length;t+=1)Y[t].m(u,null);R(u,e[5]),C(n,m),C(n,p),C(n,f),C(n,d),C(d,h);for(let t=0;t<et.length;t+=1)et[t].m(d,null);R(d,e[6]),C(n,g),C(n,$),C(n,v),C(n,S),_(S,e[2]),C(n,M),C(n,E),C(E,A),C(E,B),C(E,H),b(t,j,l),b(t,D,l),C(D,I),C(I,z),C(I,P),C(I,F);for(let t=0;t<st.length;t+=1)st[t].m(F,null);C(D,V),C(D,W),C(W,G),C(W,K),C(W,Z),U||(J=[T(o,"change",e[12]),T(u,"change",e[13]),T(d,"change",e[14]),T(S,"input",e[15]),T(A,"click",e[16]),T(n,"submit",e[9]),T(G,"click",e[18]),T(D,"submit",e[10])],U=!0)},p(t,[e]){if(2&e){let n;for(Q=t[1],n=0;n<Q.length;n+=1){const s=$e(t,Q,n);Y[n]?Y[n].p(s,e):(Y[n]=ve(s),Y[n].c(),Y[n].m(u,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Q.length}if(34&e&&R(u,t[5]),0&e){let n;for(tt=fe,n=0;n<tt.length;n+=1){const s=ge(t,tt,n);et[n]?et[n].p(s,e):(et[n]=Ce(s),et[n].c(),et[n].m(d,null))}for(;n<et.length;n+=1)et[n].d(1);et.length=tt.length}if(64&e&&R(d,t[6]),4&e&&O(S.value)!==t[2]&&_(S,t[2]),16&e&&q(n,"slide-right",2===t[4]),9&e){let n;for(nt=t[3],n=0;n<nt.length;n+=1){const s=de(t,nt,n);st[n]?st[n].p(s,e):(st[n]=ye(s),st[n].c(),st[n].m(F,null))}for(;n<st.length;n+=1)st[n].d(1);st.length=nt.length}16&e&&q(D,"slide-left",1===t[4])},i:t,o:t,d(t){t&&y(n),L(Y,t),L(et,t),t&&y(j),t&&y(D),L(st,t),U=!1,l(J)}}}function we(t,e,n){let s,l,r,{savedSplitTimes:o}=e,{mapviewer:i}=e,c=[],a=fe[1],u=0,m=[],p=1;const f=D(),d=t=>{let e=t.target.files[0],l=new FileReader;l.onload=function(t){let e=t.target.result,l=new DOMParser;s=l.parseFromString(e.toString(),"application/xml"),n(1,c=Array.from(s.querySelectorAll("ClassResult Class Name")).map((t=>t.innerHTML)))},l.readAsText(e)};return t.$$set=t=>{"savedSplitTimes"in t&&n(11,o=t.savedSplitTimes),"mapviewer"in t&&n(0,i=t.mapviewer)},[i,c,u,m,p,l,a,f,d,t=>{t.preventDefault(),r=new pe(s,l,1.2,a,u),n(3,m=((t,e)=>{const n=e.map((t=>{const[e,n]=t.runnername.split(" ");return{firstName:e,lastName:n}}));return console.log(n),t.forEach((t=>{t.rerun2dRouteIndex=null,n.forEach(((e,n)=>{(t.firstName.toLowerCase()===e.firstName.toLowerCase()&&t.lastName.toLowerCase()===e.lastName.toLowerCase()||t.firstName.toLowerCase()===e.lastName.toLowerCase()&&t.lastName.toLowerCase()===e.firstName.toLowerCase()||t.firstName.charAt(0).toLowerCase()===e.firstName.charAt(0).toLowerCase()&&t.lastName.toLowerCase()===e.lastName.toLowerCase()||t.firstName.charAt(0).toLowerCase()===e.lastName.charAt(0).toLowerCase()&&t.lastName.toLowerCase()===e.firstName.toLowerCase()||t.lastName.charAt(0).toLowerCase()===e.firstName.charAt(0).toLowerCase()&&t.firstName.toLowerCase()===e.lastName.toLowerCase()||t.lastName.charAt(0).toLowerCase()===e.lastName.charAt(0).toLowerCase()&&t.firstName.toLowerCase()===e.firstName.toLowerCase())&&(t.rerun2dRouteIndex=n)}))})),t})([...r.runners],[...i.routes])),n(4,p+=1),console.log(r,m)},()=>{n(11,o=r),n(11,o.runners=m,o),f("close")},o,t=>d(t),function(){l=B(this),n(5,l),n(1,c)},function(){a=B(this),n(6,a)},function(){u=O(this.value),n(2,u)},()=>f("close"),function(t,e){t[e].rerun2dRouteIndex=B(this),n(3,m)},()=>n(4,p=1)]}class xe extends dt{constructor(t){super(),ft(this,t,we,Le,o,{savedSplitTimes:11,mapviewer:0})}}const ke=t=>{let e=Math.trunc(t/3600),n=t%3600,s=Math.trunc(n/60);return n%=60,0===e&&0===s?String(n):0===e?n<10?String(s)+":0"+String(n):String(s)+":"+String(n):s<10?String(e)+":0"+String(s)+":"+String(n):String(e)+":"+String(s)+":"+String(n)},Se=(t,e)=>1===t.length||1===e.length?`${t} ${e}`:`${t.charAt(0)}${e.charAt(0)}`,Te=t=>1===t?"first":2===t?"second":3===t?"third":"";function Ne(t,e,n){const s=t.slice();return s[3]=e[n],s}function Me(t){let e,n,s=`Time loss: ${ke(t[3].leg.timeLost)}`;return{c(){e=w("div"),n=x(s)},m(t,s){b(t,e,s),C(e,n)},p(t,e){1&e&&s!==(s=`Time loss: ${ke(t[3].leg.timeLost)}`)&&E(n,s)},d(t){t&&y(e)}}}function Oe(t){let e,n,s,l,r,o,i=`${ke(t[3].leg.timeOverall)} (${t[3].leg.rankOverall})`,c=`+ ${ke(t[3].leg.timeBehindOverall)}`;return{c(){e=w("div"),n=x(i),s=k(),l=w("span"),r=x(c),N(l,"class","tooltip svelte-hj9rsg"),N(e,"class",o="tooltip-container "+Te(t[3].leg.rankOverall)+" svelte-hj9rsg")},m(t,o){b(t,e,o),C(e,n),C(e,s),C(e,l),C(l,r)},p(t,s){1&s&&i!==(i=`${ke(t[3].leg.timeOverall)} (${t[3].leg.rankOverall})`)&&E(n,i),1&s&&c!==(c=`+ ${ke(t[3].leg.timeBehindOverall)}`)&&E(r,c),1&s&&o!==(o="tooltip-container "+Te(t[3].leg.rankOverall)+" svelte-hj9rsg")&&N(e,"class",o)},d(t){t&&y(e)}}}function Ee(t){let e,n,s=t[3].leg.routeChoice.name+"";return{c(){e=w("strong"),n=x(s),A(e,"color",`#${t[3].leg.routeChoice.color}`,!1)},m(t,s){b(t,e,s),C(e,n)},p(t,l){1&l&&s!==(s=t[3].leg.routeChoice.name+"")&&E(n,s),1&l&&A(e,"color",`#${t[3].leg.routeChoice.color}`,!1)},d(t){t&&y(e)}}}function _e(t){let e,n,s,l,r,o,i,c,a,u,m,p,f,d,h,g,$,L,S,T,M,O=Se(t[3].firstName,t[3].lastName)+"",_=`${t[3].firstName} ${t[3].lastName}`,A=`${ke(t[3].leg.time)} (${t[3].leg.rankSplit})`,R=`+ ${ke(t[3].leg.timeBehindSplit)}`,B=!0===t[3].leg.isMistake&&Me(t),q=null!==t[3].leg.timeOverall&&Oe(t),H=t[3].leg.routeChoice&&Ee(t);return{c(){e=w("tr"),n=w("td"),s=w("div"),l=x(O),r=k(),o=w("span"),i=x(_),c=k(),a=w("td"),u=w("div"),m=x(A),p=k(),f=w("span"),d=w("div"),h=x(R),g=k(),B&&B.c(),L=k(),q&&q.c(),T=k(),M=w("td"),H&&H.c(),N(o,"class","tooltip svelte-hj9rsg"),N(s,"class","tooltip-container svelte-hj9rsg"),N(f,"class","tooltip svelte-hj9rsg"),N(u,"class",$="tooltip-container "+Te(t[3].leg.rankSplit)+" svelte-hj9rsg"),N(a,"class",S=v(t[3].leg.isMistake?"mistake":"")+" svelte-hj9rsg"),N(M,"class","right svelte-hj9rsg")},m(t,$){b(t,e,$),C(e,n),C(n,s),C(s,l),C(s,r),C(s,o),C(o,i),C(e,c),C(e,a),C(a,u),C(u,m),C(u,p),C(u,f),C(f,d),C(d,h),C(f,g),B&&B.m(f,null),C(a,L),q&&q.m(a,null),C(e,T),C(e,M),H&&H.m(M,null)},p(t,e){1&e&&O!==(O=Se(t[3].firstName,t[3].lastName)+"")&&E(l,O),1&e&&_!==(_=`${t[3].firstName} ${t[3].lastName}`)&&E(i,_),1&e&&A!==(A=`${ke(t[3].leg.time)} (${t[3].leg.rankSplit})`)&&E(m,A),1&e&&R!==(R=`+ ${ke(t[3].leg.timeBehindSplit)}`)&&E(h,R),!0===t[3].leg.isMistake?B?B.p(t,e):(B=Me(t),B.c(),B.m(f,null)):B&&(B.d(1),B=null),1&e&&$!==($="tooltip-container "+Te(t[3].leg.rankSplit)+" svelte-hj9rsg")&&N(u,"class",$),null!==t[3].leg.timeOverall?q?q.p(t,e):(q=Oe(t),q.c(),q.m(a,null)):q&&(q.d(1),q=null),1&e&&S!==(S=v(t[3].leg.isMistake?"mistake":"")+" svelte-hj9rsg")&&N(a,"class",S),t[3].leg.routeChoice?H?H.p(t,e):(H=Ee(t),H.c(),H.m(M,null)):H&&(H.d(1),H=null)},d(t){t&&y(e),B&&B.d(),q&&q.d(),H&&H.d()}}}function Ae(e){let n,s,l,r,o,i=e[0],c=[];for(let t=0;t<i.length;t+=1)c[t]=_e(Ne(e,i,t));return{c(){n=w("table"),s=w("thead"),s.innerHTML='<tr><th class="sticky-header svelte-hj9rsg">Runners</th> \n\n      <th class="sticky-header svelte-hj9rsg">Time</th> \n\n      <th class="sticky-header right svelte-hj9rsg">Routechoice</th></tr>',l=k();for(let t=0;t<c.length;t+=1)c[t].c();r=k(),o=w("tbody"),N(n,"class","svelte-hj9rsg")},m(t,e){b(t,n,e),C(n,s),C(n,l);for(let t=0;t<c.length;t+=1)c[t].m(n,null);C(n,r),C(n,o)},p(t,[e]){if(1&e){let s;for(i=t[0],s=0;s<i.length;s+=1){const l=Ne(t,i,s);c[s]?c[s].p(l,e):(c[s]=_e(l),c[s].c(),c[s].m(n,r))}for(;s<c.length;s+=1)c[s].d(1);c.length=i.length}},i:t,o:t,d(t){t&&y(n),L(c,t)}}}function Re(t,e,n){let s,{splitTimes:l}=e,{legNumber:r}=e;return t.$$set=t=>{"splitTimes"in t&&n(1,l=t.splitTimes),"legNumber"in t&&n(2,r=t.legNumber)},t.$$.update=()=>{7&t.$$.dirty&&(n(0,s=l.runners.map((t=>{let e={...t},n=t.legs[r-1];return delete e.legs,e.leg=n,e}))),n(0,s=s.sort(((t,e)=>t.leg.time-e.leg.time))))},[s,l,r]}class Be extends dt{constructor(t){super(),ft(this,t,Re,Ae,o,{splitTimes:1,legNumber:2})}}function qe(t,e,n){const s=t.slice();return s[1]=e[n],s}function He(t,e,n){const s=t.slice();return s[4]=e[n],s}function je(t,e,n){const s=t.slice();return s[7]=e[n],s[9]=n,s}function De(e){let n;return{c(){n=x("Finish")},m(t,e){b(t,n,e)},p:t,d(t){t&&y(n)}}}function Ie(t){let e,n=`${t[9]+1} (${t[7]})`;return{c(){e=x(n)},m(t,n){b(t,e,n)},p(t,s){1&s&&n!==(n=`${t[9]+1} (${t[7]})`)&&E(e,n)},d(t){t&&y(e)}}}function ze(t){let e,n;function s(t,e){return t[9]!==t[0].course.length-1?Ie:De}let l=s(t),r=l(t);return{c(){e=w("th"),r.c(),n=k(),N(e,"class","sticky-header svelte-brp1al")},m(t,s){b(t,e,s),r.m(e,null),C(e,n)},p(t,o){l===(l=s(t))&&r?r.p(t,o):(r.d(1),r=l(t),r&&(r.c(),r.m(e,n)))},d(t){t&&y(e),r.d()}}}function Pe(t){let e,n,s,l,r,o,i,c=`${ke(t[1].time)} (${t[1].rank})`,a=`+ ${ke(t[1].timeBehind)}`,u=0!==t[1].totalTimeLost&&Fe(t);return{c(){e=w("div"),n=x(c),s=k(),l=w("span"),r=w("div"),o=x(a),i=k(),u&&u.c(),N(l,"class","tooltip tooltip-top svelte-brp1al"),N(e,"class","tooltip-container svelte-brp1al")},m(t,c){b(t,e,c),C(e,n),C(e,s),C(e,l),C(l,r),C(r,o),C(l,i),u&&u.m(l,null)},p(t,e){1&e&&c!==(c=`${ke(t[1].time)} (${t[1].rank})`)&&E(n,c),1&e&&a!==(a=`+ ${ke(t[1].timeBehind)}`)&&E(o,a),0!==t[1].totalTimeLost?u?u.p(t,e):(u=Fe(t),u.c(),u.m(l,null)):u&&(u.d(1),u=null)},d(t){t&&y(e),u&&u.d()}}}function Fe(t){let e,n,s=`Time loss: ${ke(t[1].totalTimeLost)}`;return{c(){e=w("div"),n=x(s)},m(t,s){b(t,e,s),C(e,n)},p(t,e){1&e&&s!==(s=`Time loss: ${ke(t[1].totalTimeLost)}`)&&E(n,s)},d(t){t&&y(e)}}}function Ve(t){let e,n,s=`Time loss: ${ke(t[4].timeLost)}`;return{c(){e=w("div"),n=x(s)},m(t,s){b(t,e,s),C(e,n)},p(t,e){1&e&&s!==(s=`Time loss: ${ke(t[4].timeLost)}`)&&E(n,s)},d(t){t&&y(e)}}}function We(t){let e,n,s,l,r,o,i=`${ke(t[4].timeOverall)} (${t[4].rankOverall})`,c=`+ ${ke(t[4].timeBehindOverall)}`;return{c(){e=w("div"),n=x(i),s=k(),l=w("span"),r=x(c),N(l,"class","tooltip svelte-brp1al"),N(e,"class",o="tooltip-container "+Te(t[4].rankOverall)+" svelte-brp1al")},m(t,o){b(t,e,o),C(e,n),C(e,s),C(e,l),C(l,r)},p(t,s){1&s&&i!==(i=`${ke(t[4].timeOverall)} (${t[4].rankOverall})`)&&E(n,i),1&s&&c!==(c=`+ ${ke(t[4].timeBehindOverall)}`)&&E(r,c),1&s&&o!==(o="tooltip-container "+Te(t[4].rankOverall)+" svelte-brp1al")&&N(e,"class",o)},d(t){t&&y(e)}}}function Ge(t){let e,n,s,l,r,o,i,c,a,u,m,p=`${ke(t[4].time)} (${t[4].rankSplit})`,f=`+ ${ke(t[4].timeBehindSplit)}`,d=!0===t[4].isMistake&&Ve(t),h=null!==t[4].timeOverall&&We(t);return{c(){e=w("td"),n=w("div"),s=x(p),l=k(),r=w("span"),o=w("div"),i=x(f),c=k(),d&&d.c(),u=k(),h&&h.c(),N(r,"class","tooltip svelte-brp1al"),N(n,"class",a="tooltip-container "+Te(t[4].rankSplit)+" svelte-brp1al"),N(e,"class",m=v(t[4].isMistake?"mistake":"")+" svelte-brp1al")},m(t,a){b(t,e,a),C(e,n),C(n,s),C(n,l),C(n,r),C(r,o),C(o,i),C(r,c),d&&d.m(r,null),C(e,u),h&&h.m(e,null)},p(t,l){1&l&&p!==(p=`${ke(t[4].time)} (${t[4].rankSplit})`)&&E(s,p),1&l&&f!==(f=`+ ${ke(t[4].timeBehindSplit)}`)&&E(i,f),!0===t[4].isMistake?d?d.p(t,l):(d=Ve(t),d.c(),d.m(r,null)):d&&(d.d(1),d=null),1&l&&a!==(a="tooltip-container "+Te(t[4].rankSplit)+" svelte-brp1al")&&N(n,"class",a),null!==t[4].timeOverall?h?h.p(t,l):(h=We(t),h.c(),h.m(e,null)):h&&(h.d(1),h=null),1&l&&m!==(m=v(t[4].isMistake?"mistake":"")+" svelte-brp1al")&&N(e,"class",m)},d(t){t&&y(e),d&&d.d(),h&&h.d()}}}function Ke(t){let e,n,s,l,r,o,i,c=Se(t[1].firstName,t[1].lastName)+"",a="OK"===t[1].status&&Pe(t),u=t[1].legs,m=[];for(let e=0;e<u.length;e+=1)m[e]=Ge(He(t,u,e));return{c(){e=w("tr"),n=w("td"),s=w("div"),l=x(c),r=k(),a&&a.c(),o=k();for(let t=0;t<m.length;t+=1)m[t].c();i=k(),N(n,"class","sticky-column-header svelte-brp1al")},m(t,c){b(t,e,c),C(e,n),C(n,s),C(s,l),C(n,r),a&&a.m(n,null),C(e,o);for(let t=0;t<m.length;t+=1)m[t].m(e,null);C(e,i)},p(t,s){if(1&s&&c!==(c=Se(t[1].firstName,t[1].lastName)+"")&&E(l,c),"OK"===t[1].status?a?a.p(t,s):(a=Pe(t),a.c(),a.m(n,null)):a&&(a.d(1),a=null),1&s){let n;for(u=t[1].legs,n=0;n<u.length;n+=1){const l=He(t,u,n);m[n]?m[n].p(l,s):(m[n]=Ge(l),m[n].c(),m[n].m(e,i))}for(;n<m.length;n+=1)m[n].d(1);m.length=u.length}},d(t){t&&y(e),a&&a.d(),L(m,t)}}}function Xe(e){let n,s,l,r,o,i,c,a,u=e[0].course,m=[];for(let t=0;t<u.length;t+=1)m[t]=ze(je(e,u,t));let p=e[0].runners,f=[];for(let t=0;t<p.length;t+=1)f[t]=Ke(qe(e,p,t));return{c(){n=w("div"),s=w("table"),l=w("thead"),r=w("tr"),o=w("th"),o.textContent="Runners",i=k();for(let t=0;t<m.length;t+=1)m[t].c();c=k(),a=w("tbody");for(let t=0;t<f.length;t+=1)f[t].c();N(o,"class","sticky-header sticky-column-header svelte-brp1al"),N(a,"class","svelte-brp1al"),N(s,"class","svelte-brp1al"),N(n,"class","table-container svelte-brp1al")},m(t,e){b(t,n,e),C(n,s),C(s,l),C(l,r),C(r,o),C(r,i);for(let t=0;t<m.length;t+=1)m[t].m(r,null);C(s,c),C(s,a);for(let t=0;t<f.length;t+=1)f[t].m(a,null)},p(t,[e]){if(1&e){let n;for(u=t[0].course,n=0;n<u.length;n+=1){const s=je(t,u,n);m[n]?m[n].p(s,e):(m[n]=ze(s),m[n].c(),m[n].m(r,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=u.length}if(1&e){let n;for(p=t[0].runners,n=0;n<p.length;n+=1){const s=qe(t,p,n);f[n]?f[n].p(s,e):(f[n]=Ke(s),f[n].c(),f[n].m(a,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=p.length}},i:t,o:t,d(t){t&&y(n),L(m,t),L(f,t)}}}function Ze(t,e,n){let{splitTimes:s}=e;return t.$$set=t=>{"splitTimes"in t&&n(0,s=t.splitTimes)},[s]}class Ue extends dt{constructor(t){super(),ft(this,t,Ze,Xe,o,{splitTimes:0})}}function Je(t,e,n){const s=t.slice();return s[3]=e[n],s}function Qe(t){let e,n,s,l,r,o,i=t[3].label+"";return{c(){e=w("p"),n=x(i),s=w("span"),l=w("span"),o=k(),N(l,"data-tooltip",r=`${t[3].value}${t[1]}`),N(l,"class","bar svelte-1c9a8px"),A(l,"background-color",`#${t[3].color}`,!1),A(l,"width",100*t[3].value/t[2]+"%",!1),N(s,"class","bar-group svelte-1c9a8px"),N(e,"class","graph-item svelte-1c9a8px")},m(t,r){b(t,e,r),C(e,n),C(e,s),C(s,l),C(e,o)},p(t,e){1&e&&i!==(i=t[3].label+"")&&E(n,i),3&e&&r!==(r=`${t[3].value}${t[1]}`)&&N(l,"data-tooltip",r),1&e&&A(l,"background-color",`#${t[3].color}`,!1),5&e&&A(l,"width",100*t[3].value/t[2]+"%",!1)},d(t){t&&y(e)}}}function Ye(e){let n,s=e[0],l=[];for(let t=0;t<s.length;t+=1)l[t]=Qe(Je(e,s,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();n=S()},m(t,e){for(let n=0;n<l.length;n+=1)l[n].m(t,e);b(t,n,e)},p(t,[e]){if(7&e){let r;for(s=t[0],r=0;r<s.length;r+=1){const o=Je(t,s,r);l[r]?l[r].p(o,e):(l[r]=Qe(o),l[r].c(),l[r].m(n.parentNode,n))}for(;r<l.length;r+=1)l[r].d(1);l.length=s.length}},i:t,o:t,d(t){L(l,t),t&&y(n)}}}function tn(t,e,n){let{data:s}=e,{suffix:l=""}=e,r=0;return t.$$set=t=>{"data"in t&&n(0,s=t.data),"suffix"in t&&n(1,l=t.suffix)},t.$$.update=()=>{1&t.$$.dirty&&n(2,r=Math.max(...s.map((t=>t.value))))},[s,l,r]}class en extends dt{constructor(t){super(),ft(this,t,tn,Ye,o,{data:0,suffix:1})}}function nn(t){let e,n,s,l,r,o,i,c;return s=new en({props:{data:t[0],suffix:" s"}}),i=new en({props:{data:t[1]}}),{c(){e=w("h3"),e.textContent="Fastest Time",n=k(),at(s.$$.fragment),l=k(),r=w("h3"),r.textContent="Number of runners",o=k(),at(i.$$.fragment)},m(t,a){b(t,e,a),b(t,n,a),ut(s,t,a),b(t,l,a),b(t,r,a),b(t,o,a),ut(i,t,a),c=!0},p(t,[e]){const n={};1&e&&(n.data=t[0]),s.$set(n);const l={};2&e&&(l.data=t[1]),i.$set(l)},i(t){c||(lt(s.$$.fragment,t),lt(i.$$.fragment,t),c=!0)},o(t){rt(s.$$.fragment,t),rt(i.$$.fragment,t),c=!1},d(t){t&&y(e),t&&y(n),mt(s,t),t&&y(l),t&&y(r),t&&y(o),mt(i,t)}}}function sn(t,e){return t.label.localeCompare(e.label)}function ln(t,e,n){let{splitTimes:s}=e,{legNumber:l}=e,r=[],o=[];return t.$$set=t=>{"splitTimes"in t&&n(2,s=t.splitTimes),"legNumber"in t&&n(3,l=t.legNumber)},t.$$.update=()=>{if(12&t.$$.dirty&&0!==s.routeChoicesStatistics.length){const t=s.routeChoicesStatistics[l-1],e=Object.keys(t).map((e=>Object.assign(Object.assign({},t[e]),{name:e})));n(0,r=e.map((t=>({label:t.name,value:t.fastestTime,color:t.color}))).sort(sn)),n(1,o=e.map((t=>({label:t.name,value:t.numberOfRunners,color:t.color}))).sort(sn))}},[r,o,s,l]}class rn extends dt{constructor(t){super(),ft(this,t,ln,nn,o,{splitTimes:2,legNumber:3})}}function on(e){let n,s,r,o,i,c,a,u;return{c(){n=w("div"),s=w("button"),r=x(e[1]),o=k(),i=w("button"),c=x(e[2]),N(s,"class","first-button svelte-1uksrpc"),q(s,"not-selected",!e[0]),N(i,"class","second-button svelte-1uksrpc"),q(i,"not-selected",e[0]),N(n,"class","toggle-container svelte-1uksrpc")},m(t,l){b(t,n,l),C(n,s),C(s,r),C(n,o),C(n,i),C(i,c),a||(u=[T(s,"click",e[3]),T(i,"click",e[4])],a=!0)},p(t,[e]){2&e&&E(r,t[1]),1&e&&q(s,"not-selected",!t[0]),4&e&&E(c,t[2]),1&e&&q(i,"not-selected",t[0])},i:t,o:t,d(t){t&&y(n),a=!1,l(u)}}}function cn(t,e,n){let{isFirstValueSelected:s}=e,{firstLabel:l}=e,{secondLabel:r}=e;return t.$$set=t=>{"isFirstValueSelected"in t&&n(0,s=t.isFirstValueSelected),"firstLabel"in t&&n(1,l=t.firstLabel),"secondLabel"in t&&n(2,r=t.secondLabel)},[s,l,r,()=>n(0,s=!0),()=>n(0,s=!1)]}class an extends dt{constructor(t){super(),ft(this,t,cn,on,o,{isFirstValueSelected:0,firstLabel:1,secondLabel:2})}}function un(t,e,n){const s=t.contentDocument.getElementById(e);s.value=n,s.dispatchEvent(new Event("change"))}const mn=(t,e,n)=>{let s,l=Cn([n[0]-e[0],n[1]-e[1]],[t[0]-e[0],t[1]-e[1]])/Math.pow(vn([n[0]-e[0],n[1]-e[1]]),2);return s=l<0?vn([t[0]-e[0],t[1]-e[1]]):l>1?vn([n[0]-t[0],n[1]-t[1]]):Math.sqrt(Math.pow(vn([t[0]-e[0],t[1]-e[1]]),2)-Math.pow(l*vn([n[0]-e[0],n[1]-e[1]]),2)),s},pn=(t,e)=>{let n=0;return t.forEach((t=>{n+=((t,e)=>{let n=vn([t[0]-e[0][0],t[1]-e[0][1]]);for(let s=1;s<e.length;s++){const l=mn(t,e[s-1],e[s]);l<n&&(n=l)}return n})(t,e)})),n},fn=(t,e)=>{let n=e[0].name,s=e[0].color,l=pn(t,e[0].points);return e.forEach((e=>{let r=pn(t,e.points);r<l&&(l=r,n=e.name,s=e.color)})),{name:n,color:s}},dn=(t,e,n)=>t.filter((t=>t[2]>e)).filter((t=>t[2]<n)).map((t=>[t[0],t[1]])),hn=(t,e)=>{let n=t.tags.filter((t=>t.legNumber===e));return n.map((t=>({name:t.name,legNumber:n.legNumber,points:t.points.map((t=>$n(t))),color:t.color})))},gn=t=>{let e=Object.assign({},t);return e.tags.forEach((t=>{let n=bn([t.x,t.y],$n(e.coursecoords[0])),s=0;e.coursecoords.forEach(((e,l)=>{let r=bn([t.x,t.y],$n(e));r<n&&(n=r,s=l)})),t.legNumber=s})),e},$n=t=>t.split(",").map((t=>Number(t))),vn=t=>Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)),Cn=(t,e)=>t[0]*e[0]+t[1]*e[1],bn=(t,e)=>vn(((t,e)=>[t[0]-e[0],t[1]-e[1]])(t,e));function yn(t){let e,n;return e=new oe({props:{$$slots:{content:[wn],title:[Ln]},$$scope:{ctx:t}}}),e.$on("closeDialog",t[15]),{c(){at(e.$$.fragment)},m(t,s){ut(e,t,s),n=!0},p(t,n){const s={};4194377&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){mt(e,t)}}}function Ln(t){let e;return{c(){e=w("h3"),e.textContent="Load split times",N(e,"slot","title")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function wn(t){let e,n,s;function l(e){t[13](e)}let r={slot:"content",mapviewer:t[6]};return void 0!==t[3]&&(r.savedSplitTimes=t[3]),e=new xe({props:r}),F.push((()=>ct(e,"savedSplitTimes",l))),e.$on("close",t[14]),{c(){at(e.$$.fragment)},m(t,n){ut(e,t,n),s=!0},p(t,s){const l={};64&s&&(l.mapviewer=t[6]),!n&&8&s&&(n=!0,l.savedSplitTimes=t[3],Z((()=>n=!1))),e.$set(l)},i(t){s||(lt(e.$$.fragment,t),s=!0)},o(t){rt(e.$$.fragment,t),s=!1},d(t){mt(e,t)}}}function xn(t){let e,n;return e=new oe({props:{$$slots:{content:[Sn],title:[kn]},$$scope:{ctx:t}}}),e.$on("closeDialog",t[16]),{c(){at(e.$$.fragment)},m(t,s){ut(e,t,s),n=!0},p(t,n){const s={};4194312&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){mt(e,t)}}}function kn(t){let e;return{c(){e=w("h1"),e.textContent="Split times",N(e,"slot","title")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Sn(t){let e,n;return e=new Ue({props:{slot:"content",splitTimes:t[3]}}),{c(){at(e.$$.fragment)},m(t,s){ut(e,t,s),n=!0},p(t,n){const s={};8&n&&(s.splitTimes=t[3]),e.$set(s)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){mt(e,t)}}}function Tn(t){let e,n,s,r,o,i,c,a,u,m,p,f,d,h,g,$,v,L,x,S,M,O,E,_,A;function R(e){t[18](e)}let B={firstLabel:"Splits",secondLabel:"Graph"};void 0!==t[2]&&(B.isFirstValueSelected=t[2]),x=new an({props:B}),F.push((()=>ct(x,"isFirstValueSelected",R)));let q=!t[2]&&Nn(t),H=t[2]&&Mn(t);return{c(){e=w("aside"),n=w("details"),s=w("summary"),s.innerHTML='<span class="svelte-1398d2s"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svelte-1398d2s"><path d="M495.9 166.6C499.2 175.2 496.4 184.9 489.6 191.2L446.3 230.6C447.4 238.9 448 247.4 448 256C448 264.6 447.4 273.1 446.3 281.4L489.6 320.8C496.4 327.1 499.2 336.8 495.9 345.4C491.5 357.3 486.2 368.8 480.2 379.7L475.5 387.8C468.9 398.8 461.5 409.2 453.4 419.1C447.4 426.2 437.7 428.7 428.9 425.9L373.2 408.1C359.8 418.4 344.1 427 329.2 433.6L316.7 490.7C314.7 499.7 307.7 506.1 298.5 508.5C284.7 510.8 270.5 512 255.1 512C241.5 512 227.3 510.8 213.5 508.5C204.3 506.1 197.3 499.7 195.3 490.7L182.8 433.6C167 427 152.2 418.4 138.8 408.1L83.14 425.9C74.3 428.7 64.55 426.2 58.63 419.1C50.52 409.2 43.12 398.8 36.52 387.8L31.84 379.7C25.77 368.8 20.49 357.3 16.06 345.4C12.82 336.8 15.55 327.1 22.41 320.8L65.67 281.4C64.57 273.1 64 264.6 64 256C64 247.4 64.57 238.9 65.67 230.6L22.41 191.2C15.55 184.9 12.82 175.3 16.06 166.6C20.49 154.7 25.78 143.2 31.84 132.3L36.51 124.2C43.12 113.2 50.52 102.8 58.63 92.95C64.55 85.8 74.3 83.32 83.14 86.14L138.8 103.9C152.2 93.56 167 84.96 182.8 78.43L195.3 21.33C197.3 12.25 204.3 5.04 213.5 3.51C227.3 1.201 241.5 0 256 0C270.5 0 284.7 1.201 298.5 3.51C307.7 5.04 314.7 12.25 316.7 21.33L329.2 78.43C344.1 84.96 359.8 93.56 373.2 103.9L428.9 86.14C437.7 83.32 447.4 85.8 453.4 92.95C461.5 102.8 468.9 113.2 475.5 124.2L480.2 132.3C486.2 143.2 491.5 154.7 495.9 166.6V166.6zM256 336C300.2 336 336 300.2 336 255.1C336 211.8 300.2 175.1 256 175.1C211.8 175.1 176 211.8 176 255.1C176 300.2 211.8 336 256 336z"></path></svg>Options</span>',r=k(),o=w("ul"),i=w("li"),i.innerHTML='<button class="svelte-1398d2s">Load course</button>',c=k(),a=w("li"),a.innerHTML='<button class="svelte-1398d2s">Load routechoices</button>',u=k(),m=w("li"),p=w("button"),p.textContent="Load split times",f=k(),d=w("li"),h=w("button"),h.textContent="Detect routechoices",g=k(),$=w("li"),v=w("button"),v.textContent="Toggle 2D Rerun",L=k(),at(x.$$.fragment),M=k(),q&&q.c(),O=k(),H&&H.c(),N(s,"class","icon-button svelte-1398d2s"),N(p,"class","svelte-1398d2s"),N(h,"class","svelte-1398d2s"),N(v,"class","svelte-1398d2s"),N(o,"class","svelte-1398d2s"),N(n,"class","options svelte-1398d2s"),N(e,"class","svelte-1398d2s")},m(l,y){b(l,e,y),C(e,n),C(n,s),C(n,r),C(n,o),C(o,i),C(o,c),C(o,a),C(o,u),C(o,m),C(m,p),C(o,f),C(o,d),C(d,h),C(o,g),C(o,$),C($,v),C(e,L),ut(x,e,null),C(e,M),q&&q.m(e,null),C(e,O),H&&H.m(e,null),E=!0,_||(A=[T(p,"click",t[17]),T(h,"click",t[11]),T(v,"click",t[9])],_=!0)},p(t,n){const s={};!S&&4&n&&(S=!0,s.isFirstValueSelected=t[2],Z((()=>S=!1))),x.$set(s),t[2]?q&&(nt(),rt(q,1,1,(()=>{q=null})),st()):q?(q.p(t,n),4&n&&lt(q,1)):(q=Nn(t),q.c(),lt(q,1),q.m(e,O)),t[2]?H?(H.p(t,n),4&n&&lt(H,1)):(H=Mn(t),H.c(),lt(H,1),H.m(e,null)):H&&(nt(),rt(H,1,1,(()=>{H=null})),st())},i(t){E||(lt(x.$$.fragment,t),lt(q),lt(H),E=!0)},o(t){rt(x.$$.fragment,t),rt(q),rt(H),E=!1},d(t){t&&y(e),mt(x),q&&q.d(),H&&H.d(),_=!1,l(A)}}}function Nn(t){let e,n,s;return n=new rn({props:{legNumber:t[4],splitTimes:t[3]}}),{c(){e=w("section"),at(n.$$.fragment),N(e,"class","routechoices-graph svelte-1398d2s")},m(t,l){b(t,e,l),ut(n,e,null),s=!0},p(t,e){const s={};16&e&&(s.legNumber=t[4]),8&e&&(s.splitTimes=t[3]),n.$set(s)},i(t){s||(lt(n.$$.fragment,t),s=!0)},o(t){rt(n.$$.fragment,t),s=!1},d(t){t&&y(e),mt(n)}}}function Mn(t){let e,n,s;return n=new Be({props:{legNumber:t[4],splitTimes:t[3]}}),{c(){e=w("section"),at(n.$$.fragment),N(e,"class","leg-split-times-table-container svelte-1398d2s")},m(t,l){b(t,e,l),ut(n,e,null),s=!0},p(t,e){const s={};16&e&&(s.legNumber=t[4]),8&e&&(s.splitTimes=t[3]),n.$set(s)},i(t){s||(lt(n.$$.fragment,t),s=!0)},o(t){rt(n.$$.fragment,t),s=!1},d(t){t&&y(e),mt(n)}}}function On(t){let e,n,s,r,o,c,a,u,m,p,f,d,h,g,$,v,L,x=t[0]&&yn(t),S=t[1]&&xn(t),M=t[7]&&Tn(t);function O(e){t[19](e)}let E={numberOfLegs:t[5]};return void 0!==t[4]&&(E.selectedLeg=t[4]),f=new me({props:E}),F.push((()=>ct(f,"selectedLeg",O))),f.$on("legChange",t[10]),{c(){var t,l;x&&x.c(),e=k(),S&&S.c(),n=k(),s=w("main"),M&&M.c(),r=k(),o=w("iframe"),a=k(),u=w("div"),m=w("button"),m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svelte-1398d2s"><path d="M287.9 0C297.1 0 305.5 5.25 309.5 13.52L378.1 154.8L531.4 177.5C540.4 178.8 547.8 185.1 550.7 193.7C553.5 202.4 551.2 211.9 544.8 218.2L433.6 328.4L459.9 483.9C461.4 492.9 457.7 502.1 450.2 507.4C442.8 512.7 432.1 513.4 424.9 509.1L287.9 435.9L150.1 509.1C142.9 513.4 133.1 512.7 125.6 507.4C118.2 502.1 114.5 492.9 115.1 483.9L142.2 328.4L31.11 218.2C24.65 211.9 22.36 202.4 25.2 193.7C28.03 185.1 35.5 178.8 44.49 177.5L197.7 154.8L266.3 13.52C270.4 5.249 278.7 0 287.9 0L287.9 0zM287.9 78.95L235.4 187.2C231.9 194.3 225.1 199.3 217.3 200.5L98.98 217.9L184.9 303C190.4 308.5 192.9 316.4 191.6 324.1L171.4 443.7L276.6 387.5C283.7 383.7 292.2 383.7 299.2 387.5L404.4 443.7L384.2 324.1C382.9 316.4 385.5 308.5 391 303L476.9 217.9L358.6 200.5C350.7 199.3 343.9 194.3 340.5 187.2L287.9 78.95z"></path></svg>',p=k(),at(f.$$.fragment),h=k(),g=w("button"),g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svelte-1398d2s"><path d="M64 400C64 408.8 71.16 416 80 416H480C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H80C35.82 480 0 444.2 0 400V64C0 46.33 14.33 32 32 32C49.67 32 64 46.33 64 64V400zM342.6 278.6C330.1 291.1 309.9 291.1 297.4 278.6L240 221.3L150.6 310.6C138.1 323.1 117.9 323.1 105.4 310.6C92.88 298.1 92.88 277.9 105.4 265.4L217.4 153.4C229.9 140.9 250.1 140.9 262.6 153.4L320 210.7L425.4 105.4C437.9 92.88 458.1 92.88 470.6 105.4C483.1 117.9 483.1 138.1 470.6 150.6L342.6 278.6z"></path></svg>',N(o,"id","2d-rerun"),N(o,"title","2d-rerun"),t=o.src,l=c="2d-rerun/2d-rerun.html",i||(i=document.createElement("a")),i.href=l,t!==i.href&&N(o,"src","2d-rerun/2d-rerun.html"),N(o,"class","svelte-1398d2s"),N(m,"class","mobile svelte-1398d2s"),N(g,"class","mobile svelte-1398d2s"),N(u,"class","control-bar svelte-1398d2s"),N(s,"class","course-container svelte-1398d2s")},m(l,i){x&&x.m(l,i),b(l,e,i),S&&S.m(l,i),b(l,n,i),b(l,s,i),M&&M.m(s,null),C(s,r),C(s,o),C(s,a),C(s,u),C(u,m),C(u,p),ut(f,u,null),C(u,h),C(u,g),$=!0,v||(L=[T(o,"load",t[8]),T(g,"click",t[20])],v=!0)},p(t,[l]){t[0]?x?(x.p(t,l),1&l&&lt(x,1)):(x=yn(t),x.c(),lt(x,1),x.m(e.parentNode,e)):x&&(nt(),rt(x,1,1,(()=>{x=null})),st()),t[1]?S?(S.p(t,l),2&l&&lt(S,1)):(S=xn(t),S.c(),lt(S,1),S.m(n.parentNode,n)):S&&(nt(),rt(S,1,1,(()=>{S=null})),st()),t[7]?M?(M.p(t,l),128&l&&lt(M,1)):(M=Tn(t),M.c(),lt(M,1),M.m(s,r)):M&&(nt(),rt(M,1,1,(()=>{M=null})),st());const o={};32&l&&(o.numberOfLegs=t[5]),!d&&16&l&&(d=!0,o.selectedLeg=t[4],Z((()=>d=!1))),f.$set(o)},i(t){$||(lt(x),lt(S),lt(M),lt(f.$$.fragment,t),$=!0)},o(t){rt(x),rt(S),rt(M),rt(f.$$.fragment,t),$=!1},d(t){x&&x.d(t),t&&y(e),S&&S.d(t),t&&y(n),t&&y(s),M&&M.d(),mt(f),v=!1,l(L)}}}function En(t,e,n){let s,l,r,o=!1,i=!1,c=!0,a={runners:[],routeChoicesStatistics:[]},u=1,m=!0;const p=()=>{un(s,"selectmode","analyzecourse"),s.contentDocument.getElementById(`ac-${u}`).click()},f=()=>{r.routes.forEach(((t,e)=>{let n=a.runners.find((t=>t.rerun2dRouteIndex===e));if(null==n?void 0:n.legs.length){let e=new Date(n.startTime),s=Math.round(e.valueOf()/1e3);t.splits.push({index:s-t.zerotime}),n.legs.forEach((e=>{t.splits.push({index:s+e.timeOverall-t.zerotime})})),t.manualsplits=1}}))};return[o,i,c,a,u,l,r,m,()=>{s=document.getElementById("2d-rerun"),s.contentWindow.mapviewer.loadseu("http://www.tulospalvelu.fi/gps/","logatec_3LENA"),fetch("course-tags.json").then((t=>t.json())).then((t=>{s.contentWindow.mapviewer.tags=t.tags,s.contentWindow.mapviewer.coursecoords=t.coursecoords,s.contentWindow.mapviewer.otechinfo=t.otechinfo,s.contentWindow.mapviewer.request_redraw(),s.contentWindow.mapviewer.update_routediv(),n(6,r=s.contentWindow.mapviewer),console.log(r),n(5,l=t.coursecoords.length-1),s.contentDocument.getElementById("shown").click(),un(s,"selectmode","analyzecourse"),un(s,"showtagsselect","1"),setTimeout(p,3e3)}))},()=>{if(s){let t=s.contentDocument.getElementById("rightmenu");t.style.display="block"===t.style.display?"none":"block"}},p,()=>{var t,e,s;n(3,a.runners=(t=a.runners,e=r,s=r.routes,e=gn(e),t.forEach((t=>{const n=s[t.rerun2dRouteIndex];if(n){const s=n.latarray.map(((t,e)=>[t,n.lngarray[e],n.timearray[e]]));t.legs.forEach(((n,l)=>{const r=new Date(t.startTime).getTime()/1e3;console.log(r);const o=0===l?r:r+t.legs[l-1].timeOverall,i=r+n.timeOverall;let c=dn(s,o,i),a=hn(e,l+1);n.routeChoice=0!==a.length?fn(c,a):null}))}})),t),a),a.computeRoutechoicesStatistics()},f,function(t){a=t,n(3,a)},()=>{n(0,o=!1),f()},()=>n(0,o=!1),()=>n(1,i=!1),()=>n(0,o=!0),function(t){c=t,n(2,c)},function(t){u=t,n(4,u)},()=>n(7,m=!m)]}class _n extends dt{constructor(t){super(),ft(this,t,En,On,o,{})}}function An(t){let e;return{c(){e=x("About")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Rn(t){let e;return{c(){e=x("Login")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Bn(t){let e;return{c(){e=x("Courses")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function qn(t){let e;return{c(){e=x("About")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Hn(t){let e;return{c(){e=x("Login")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function jn(t){let e;return{c(){e=x("Courses")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Dn(t){let e,n;return e=new Kt({}),{c(){at(e.$$.fragment)},m(t,s){ut(e,t,s),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){mt(e,t)}}}function In(t){let e,n;return e=new Qt({}),{c(){at(e.$$.fragment)},m(t,s){ut(e,t,s),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){mt(e,t)}}}function zn(t){let e,n;return e=new _n({}),{c(){at(e.$$.fragment)},m(t,s){ut(e,t,s),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){mt(e,t)}}}function Pn(t){let e,n,s,l,r,o,i,c,a,u,m,p,f,d,h,g,$,v,L,x,S,T,M,O,E,_,A,R,B,q,H,j,D,I,z;return o=new Wt({props:{to:"about",$$slots:{default:[An]},$$scope:{ctx:t}}}),a=new Wt({props:{to:"login",$$slots:{default:[Rn]},$$scope:{ctx:t}}}),p=new Wt({props:{to:"courses",$$slots:{default:[Bn]},$$scope:{ctx:t}}}),x=new Wt({props:{to:"about",$$slots:{default:[qn]},$$scope:{ctx:t}}}),M=new Wt({props:{to:"login",$$slots:{default:[Hn]},$$scope:{ctx:t}}}),_=new Wt({props:{to:"courses",$$slots:{default:[jn]},$$scope:{ctx:t}}}),R=new Pt({props:{path:"about",component:Zt}}),q=new Pt({props:{path:"/",$$slots:{default:[Dn]},$$scope:{ctx:t}}}),j=new Pt({props:{path:"login",$$slots:{default:[In]},$$scope:{ctx:t}}}),I=new Pt({props:{path:"courses",$$slots:{default:[zn]},$$scope:{ctx:t}}}),{c(){e=w("nav"),n=w("ul"),n.innerHTML='<li class="svelte-l3vnkl"><a class="logo-link svelte-l3vnkl" href="/"><svg id="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="400" viewBox="0, 0, 400,400" class="svelte-l3vnkl"><g id="svgg"><path id="path0" d="M44.834 8.642 C -9.236 15.598,-16.592 90.812,35.081 108.357 C 62.086 117.526,92.795 101.206,100.469 73.606 L 101.828 68.717 204.625 68.929 L 307.422 69.141 314.844 71.720 C 372.485 91.749,370.139 167.252,311.328 184.854 C 306.948 186.165,299.374 186.288,195.703 186.728 C 74.030 187.244,81.373 186.948,68.180 191.879 C -3.555 218.693,1.397 317.718,75.491 338.101 L 83.203 340.223 158.550 340.446 L 233.897 340.670 215.082 359.593 C 204.734 370.000,196.019 379.337,195.716 380.341 C 193.785 386.730,200.102 393.064,206.641 391.298 C 211.139 390.083,263.300 336.904,263.824 332.999 C 264.468 328.199,263.604 327.172,235.005 298.739 C 205.985 269.888,204.826 269.097,198.916 274.134 C 192.068 279.969,193.526 282.731,214.748 304.124 L 233.176 322.702 158.580 322.484 L 83.984 322.266 78.516 320.428 C 19.492 300.595,20.273 224.977,79.688 206.899 L 85.547 205.116 196.484 204.668 C 316.415 204.184,308.429 204.465,321.484 200.267 C 394.585 176.762,390.757 73.892,316.016 53.327 L 308.203 51.177 204.943 50.960 L 101.684 50.743 100.813 46.682 C 95.722 22.945,69.924 5.415,44.834 8.642 M57.120 26.567 C 83.498 31.490,93.480 64.209,74.419 83.270 C 55.379 102.310,22.242 91.240,18.093 64.453 C 14.614 41.995,34.799 22.401,57.120 26.567 M337.500 281.632 C 305.844 288.752,288.466 324.933,302.668 354.152 C 321.243 392.369,376.462 392.648,394.793 354.618 C 413.613 315.574,379.546 272.174,337.500 281.632 M361.206 300.719 C 383.881 309.619,389.474 339.193,371.662 356.005 C 350.403 376.072,315.678 360.926,315.633 331.568 C 315.598 308.426,339.545 292.216,361.206 300.719 "></path></g></svg>Routechoice DB</a></li>',s=k(),l=w("ul"),r=w("li"),at(o.$$.fragment),i=k(),c=w("li"),at(a.$$.fragment),u=k(),m=w("li"),at(p.$$.fragment),f=k(),d=w("li"),h=w("details"),g=w("summary"),g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svelte-l3vnkl"><path d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"></path></svg>',$=k(),v=w("ul"),L=w("li"),at(x.$$.fragment),S=k(),T=w("li"),at(M.$$.fragment),O=k(),E=w("li"),at(_.$$.fragment),A=k(),at(R.$$.fragment),B=k(),at(q.$$.fragment),H=k(),at(j.$$.fragment),D=k(),at(I.$$.fragment),N(n,"class","svelte-l3vnkl"),N(r,"class","large svelte-l3vnkl"),N(c,"class","large svelte-l3vnkl"),N(m,"class","large svelte-l3vnkl"),N(g,"aria-haspopup","listbox"),N(g,"class","svelte-l3vnkl"),N(L,"class","svelte-l3vnkl"),N(T,"class","svelte-l3vnkl"),N(E,"class","svelte-l3vnkl"),N(v,"role","listbox"),N(v,"class","svelte-l3vnkl"),N(h,"role","list"),N(d,"class","hamburger svelte-l3vnkl"),N(l,"class","svelte-l3vnkl"),N(e,"class","container-fluid svelte-l3vnkl")},m(t,y){b(t,e,y),C(e,n),C(e,s),C(e,l),C(l,r),ut(o,r,null),C(l,i),C(l,c),ut(a,c,null),C(l,u),C(l,m),ut(p,m,null),C(l,f),C(l,d),C(d,h),C(h,g),C(h,$),C(h,v),C(v,L),ut(x,L,null),C(v,S),C(v,T),ut(M,T,null),C(v,O),C(v,E),ut(_,E,null),b(t,A,y),ut(R,t,y),b(t,B,y),ut(q,t,y),b(t,H,y),ut(j,t,y),b(t,D,y),ut(I,t,y),z=!0},p(t,e){const n={};2&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const s={};2&e&&(s.$$scope={dirty:e,ctx:t}),a.$set(s);const l={};2&e&&(l.$$scope={dirty:e,ctx:t}),p.$set(l);const r={};2&e&&(r.$$scope={dirty:e,ctx:t}),x.$set(r);const i={};2&e&&(i.$$scope={dirty:e,ctx:t}),M.$set(i);const c={};2&e&&(c.$$scope={dirty:e,ctx:t}),_.$set(c);const u={};2&e&&(u.$$scope={dirty:e,ctx:t}),q.$set(u);const m={};2&e&&(m.$$scope={dirty:e,ctx:t}),j.$set(m);const f={};2&e&&(f.$$scope={dirty:e,ctx:t}),I.$set(f)},i(t){z||(lt(o.$$.fragment,t),lt(a.$$.fragment,t),lt(p.$$.fragment,t),lt(x.$$.fragment,t),lt(M.$$.fragment,t),lt(_.$$.fragment,t),lt(R.$$.fragment,t),lt(q.$$.fragment,t),lt(j.$$.fragment,t),lt(I.$$.fragment,t),z=!0)},o(t){rt(o.$$.fragment,t),rt(a.$$.fragment,t),rt(p.$$.fragment,t),rt(x.$$.fragment,t),rt(M.$$.fragment,t),rt(_.$$.fragment,t),rt(R.$$.fragment,t),rt(q.$$.fragment,t),rt(j.$$.fragment,t),rt(I.$$.fragment,t),z=!1},d(t){t&&y(e),mt(o),mt(a),mt(p),mt(x),mt(M),mt(_),t&&y(A),mt(R,t),t&&y(B),mt(q,t),t&&y(H),mt(j,t),t&&y(D),mt(I,t)}}}function Fn(t){let e,n;return e=new Rt({props:{url:t[0],$$slots:{default:[Pn]},$$scope:{ctx:t}}}),{c(){at(e.$$.fragment)},m(t,s){ut(e,t,s),n=!0},p(t,[n]){const s={};1&n&&(s.url=t[0]),2&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){mt(e,t)}}}function Vn(t,e,n){let{url:s=""}=e;return t.$$set=t=>{"url"in t&&n(0,s=t.url)},[s]}return new class extends dt{constructor(t){super(),ft(this,t,Vn,Fn,o,{url:0})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
